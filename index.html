<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>استبيان روبوت التنظيف</title>
<style>
  body { font-family: Tahoma, Arial, sans-serif; background:#f5f7fa; margin:0; padding:20px; color:#102a43; }
  .container { max-width:720px; margin:32px auto; background:#fff; border-radius:10px; box-shadow:0 8px 24px rgba(0,0,0,0.08); padding:22px; }
  h1 { text-align:center; color:#0b4a6f; margin:0 0 12px; }
  .progress-bar { background:#e6eef6; height:12px; border-radius:8px; overflow:hidden; margin-bottom:18px; }
  .progress { height:100%; width:0%; background:linear-gradient(90deg,#0b6b8f,#2aa3d1); transition:width 600ms ease; }
  .step { display:none; }
  .step.active { display:block; animation:fadeIn 300ms ease; }
  @keyframes fadeIn { from {opacity:0; transform:translateY(6px)} to {opacity:1; transform:none} }
  h2 { font-size:18px; color:#0b4a6f; margin:6px 0 12px; }
  .radio-group label, .checkbox-group label { display:block; margin:8px 0; cursor:pointer; font-size:15px; }
  button { display:inline-block; padding:10px 18px; background:#0b6b8f; color:white; border:none; border-radius:8px; font-weight:700; cursor:pointer; }
  .btn-secondary { background:#6b8b99; margin-left:8px; }
  .center { text-align:center; margin-top:16px; }
  #thankyou { display:none; text-align:center; padding:18px 8px; }
  #thankyou h2 { color:#0b4a6f; margin-bottom:6px; }
  .small { font-size:13px; color:#5b6f78; }
  .note { font-size:13px; color:#5b6f78; margin-top:6px; }
  /* responsive */
  @media(max-width:520px){
    .container{margin:12px}
    h2{font-size:16px}
  }
</style>
</head>
<body>
<div class="container" id="app">
  <h1>استبيان روبوت التنظيف</h1>
  <div class="progress-bar" aria-hidden="true"><div id="progress" class="progress"></div></div>

  <!-- NOTE: action + method so FormSubmit gets all fields. _template=table shows all fields as a table in email -->
  <form id="surveyForm" autocomplete="off" novalidate
        action="https://formsubmit.co/ma.berghiche@gmail.com" method="POST">

    <!-- FormSubmit helpers -->
    <input type="hidden" name="_template" value="table">
    <input type="hidden" name="_captcha" value="false">

    <!-- Original Step 1 -->
    <div class="step active" data-step="1">
      <h2>العمر</h2>
      <div class="radio-group" role="radiogroup" aria-label="العمر">
        <label><input type="radio" name="age" value="under25" required> أقل من 25</label>
        <label><input type="radio" name="age" value="25-34"> 25-34</label>
        <label><input type="radio" name="age" value="35-44"> 35-44</label>
        <label><input type="radio" name="age" value="45plus"> 45+</label>
      </div>
      <div class="center"><button type="button" id="nextBtn1">التالي</button></div>
    </div>

    <!-- Original Step 2 -->
    <div class="step" data-step="2">
      <h2>نوع السكن</h2>
      <div class="radio-group" role="radiogroup" aria-label="نوع السكن">
        <label><input type="radio" name="home_type" value="apartment" required> شقة</label>
        <label><input type="radio" name="home_type" value="house"> منزل مستقل</label>
        <label><input type="radio" name="home_type" value="villa"> فيلا</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Original Step 3 -->
    <div class="step" data-step="3">
      <h2>عدد مرات التنظيف أسبوعياً</h2>
      <div class="radio-group" role="radiogroup" aria-label="عدد مرات التنظيف">
        <label><input type="radio" name="clean_freq" value="daily" required> يومياً</label>
        <label><input type="radio" name="clean_freq" value="3-4"> 3-4 مرات</label>
        <label><input type="radio" name="clean_freq" value="1-2"> 1-2 مرات</label>
        <label><input type="radio" name="clean_freq" value="less"> أقل من مرة</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Original Step 4 -->
    <div class="step" data-step="4">
      <h2>نوع الأرضيات في المنزل (اختر كل ما ينطبق)</h2>
      <div class="checkbox-group" role="group" aria-label="نوع الأرضيات">
        <!-- NOTE: name uses [] so multiple values are sent -->
        <label><input type="checkbox" name="floor_type[]" value="tiles"> بلاط</label>
        <label><input type="checkbox" name="floor_type[]" value="wood"> أرضية خشبية</label>
        <label><input type="checkbox" name="floor_type[]" value="carpet"> سجّاد</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Original Step 5 -->
    <div class="step" data-step="5">
      <h2>وظائف روبوت التنظيف المفضلة (اختر كل ما ينطبق)</h2>
      <div class="checkbox-group" role="group" aria-label="وظائف روبوت التنظيف">
        <label><input type="checkbox" name="function[]" value="vacuum" required> شفط الغبار</label>
        <label><input type="checkbox" name="function[]" value="wash"> غسل الأرض</label>
        <label><input type="checkbox" name="function[]" value="sweep"> كنس / تنظيف سطحي</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Original Step 6 -->
    <div class="step" data-step="6">
      <h2>أعلى سعر مستعد لدفعه</h2>
      <div class="radio-group" role="radiogroup" aria-label="أعلى سعر">
        <label><input type="radio" name="max_price" value="under25000" required> أقل من 25,000 دج</label>
        <label><input type="radio" name="max_price" value="25-40k"> 25,000 - 40,000 دج</label>
        <label><input type="radio" name="max_price" value="40-60k"> 40,000 - 60,000 دج</label>
        <label><input type="radio" name="max_price" value="60kplus"> أكثر من 60,000 دج</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- NEW CRITICAL QUESTIONS START -->
    <!-- Q1 -->
    <div class="step" data-step="7">
      <h2>معرفتك السابقة بروبوتات التنظيف</h2>
      <div class="radio-group" role="radiogroup" aria-label="معرفتك السابقة بروبوتات التنظيف">
        <label><input type="radio" name="q1_experience" value="heard_only" required> سمعت عنها فقط</label>
        <label><input type="radio" name="q1_experience" value="saw_others"> رأيتها عند الآخرين</label>
        <label><input type="radio" name="q1_experience" value="used_personally"> جربتها شخصياً</label>
        <label><input type="radio" name="q1_experience" value="dont_know"> لا أعرف عنها أي شيء</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Q2 -->
    <div class="step" data-step="8">
      <h2>أكبر سبب يمنعك من شراء روبوت تنظيف</h2>
      <div class="radio-group" role="radiogroup" aria-label="أكبر سبب يمنع الشراء">
        <label><input type="radio" name="q2_barrier" value="high_price" required> السعر مرتفع</label>
        <label><input type="radio" name="q2_barrier" value="quality_unreliable"> الجودة غير مضمونة</label>
        <label><input type="radio" name="q2_barrier" value="not_suitable_floor"> غير مناسب لنوع الأرضيات عندي</label>
        <label><input type="radio" name="q2_barrier" value="dont_trust_effectiveness"> لا أثق في فعاليتها</label>
        <label><input type="radio" name="q2_barrier" value="maintenance_unavailable"> الصيانة وقطع الغيار غير متوفرة</label>
        <label><input type="radio" name="q2_barrier" value="dont_feel_need"> لا أشعر أنني بحاجة إليه</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Q4 -->
    <div class="step" data-step="9">
      <h2>هل تثق في شراء روبوت تنظيف مصنوع محلياً (جزائري) إذا كان بجودة جيدة وسعر مناسب؟</h2>
      <div class="radio-group" role="radiogroup" aria-label="هل تثق في شراء روبوت تنظيف محلي؟">
        <label><input type="radio" name="q4_local_trust" value="yes" required> نعم</label>
        <label><input type="radio" name="q4_local_trust" value="maybe"> ربما</label>
        <label><input type="radio" name="q4_local_trust" value="no"> لا</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Q5 -->
    <div class="step" data-step="10">
      <h2>ما الشركات التي تعتبرها الأكثر موثوقية في روبوتات التنظيف؟</h2>
      <div class="radio-group" role="radiogroup" aria-label="ما الشركات الأكثر موثوقية">
        <label><input type="radio" name="q5_brands" value="xiaomi" required> Xiaomi Mi Robot</label>
        <label><input type="radio" name="q5_brands" value="irobot"> iRobot Roomba</label>
        <label><input type="radio" name="q5_brands" value="ecovacs"> Ecovacs</label>
        <label><input type="radio" name="q5_brands" value="roborock"> Roborock</label>
        <label><input type="radio" name="q5_brands" value="other"> أخرى</label>
        <label><input type="radio" name="q5_brands" value="dont_know"> لا أعرف أي شركة</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>
    <!-- NEW CRITICAL QUESTIONS END -->

    <!-- Extra interest question -->
    <div class="step" data-step="11">
      <h2>هل أنت مهتم بشراء روبوت تنظيف؟</h2>
      <div class="radio-group" role="radiogroup" aria-label="هل أنت مهتم بشراء روبوت تنظيف">
        <label><input type="radio" name="interest_buy" value="interested" required> نعم، مهتم</label>
        <label><input type="radio" name="interest_buy" value="not_interested"> لا، لست مهتماً</label>
      </div>
      <div class="center"><button type="button" class="nextBtn">التالي</button></div>
    </div>

    <!-- Original Step 7 (moved to last) -->
    <div class="step" data-step="12">
      <h2>هل تفكر في شراء روبوت تنظيف خلال 12 شهرًا القادمة؟</h2>
      <div class="radio-group" aria-label="نية الشراء">
        <label><input type="radio" name="buy_intent" value="definitely" required> بالتأكيد</label>
        <label><input type="radio" name="buy_intent" value="maybe"> ربما</label>
        <label><input type="radio" name="buy_intent" value="no"> لا</label>
      </div>
      <div class="center"><button type="submit" id="submitBtn">إرسال</button></div>
    </div>

  </form>

  <div id="thankyou" aria-live="polite">
    <h2>شكراً جزيلاً على ملء الاستبيان!</h2>
    <p class="small">لقد تم تسجيل إجاباتك بنجاح. مشاركتك تساعدنا في فهم احتياجات السوق الجزائري وتطوير روبوتات تنظيف أفضل</p>
    <p class="small">نقدر وقتك واهتمامك</p>
    <div class="center" style="margin-top:12px;">
      <button id="restartBtn" class="btn-secondary">إعادة تعبئة الاستبيان</button>
    </div>
  </div>
</div>

<script>
(function(){
  const steps = Array.from(document.querySelectorAll('.step'));
  const progress = document.getElementById('progress');
  const form = document.getElementById('surveyForm');
  const thankyou = document.getElementById('thankyou');
  const restartBtn = document.getElementById('restartBtn');

  let current = 0;
  const totalSteps = steps.length;

  function showStep(index){
    steps.forEach((s,i)=> s.classList.toggle('active', i===index));
    const pct = Math.round((index)/totalSteps*100);
    progress.style.width = pct + '%';
  }

  showStep(0);

  document.querySelectorAll('.nextBtn, #nextBtn1').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const currentStepEl = steps[current];
      const requiredRadios = currentStepEl.querySelectorAll('input[type="radio"][required]');
      if(requiredRadios.length){
        const any = Array.from(requiredRadios).some(r=>{
          const name = r.name;
          return Array.from(currentStepEl.querySelectorAll('input[name="'+name+'"]')).some(rb=>rb.checked);
        });
        if(!any){
          alert('الرجاء اختيار إجابة للمواصلة');
          return;
        }
      }
      if(current < totalSteps-1){
        current++;
        showStep(current);
        const firstInput = steps[current].querySelector('input');
        if(firstInput) firstInput.focus();
      }
    });
  });

  // On submit: animate progress, then let the browser post the form normally
  form.addEventListener('submit', function(e){
    // stop default only to play animation, then allow submission
    e.preventDefault();

    const requiredRadios = steps[current].querySelectorAll('input[type="radio"][required]');
    if(requiredRadios.length){
      const any = Array.from(requiredRadios).some(r=>{
        const name = r.name;
        return Array.from(steps[current].querySelectorAll('input[name="'+name+'"]')).some(rb=>rb.checked);
      });
      if(!any){
        alert('الرجاء اختيار إجابة للمواصلة');
        return;
      }
    }

    // animate progress to full, then submit
    progress.style.transition = 'width 600ms ease';
    progress.style.width = '100%';
    setTimeout(()=>{
      // show thank you UI immediately for better UX (form will still be sent)
      form.style.display = 'none';
      thankyou.style.display = 'block';
      // actually submit the form (browser POST)
      // use a tiny timeout so the UI updates before navigation
      setTimeout(()=> form.submit(), 100);
    }, 600);

  });

  // restart functionality: reset and show first step
  restartBtn.addEventListener('click', ()=>{
    form.reset();
    thankyou.style.display = 'none';
    form.style.display = '';
    current = 0;
    progress.style.transition = 'none';
    progress.style.width = '0%';
    setTimeout(()=> {
      progress.style.transition = 'width 600ms ease';
      showStep(0);
    }, 30);
  });

})();
</script>

</body>
</html>

